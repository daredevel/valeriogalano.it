<!DOCTYPE html>
<html>

    <head>
        <title> Fix Hibernation after swap partition resize &middot; Valerio Galano - Software developer </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.62.0" />


<script src="/js/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous" async></script>


<script src="/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous" async></script>



<link rel="shortcut icon" href="/img/favicon.ico">








<script type="text/javascript">
    var _iub = _iub || [];
    _iub.csConfiguration = {"lang":"it","siteId":110958,"consentOnLinkAndButton":false,"consentOnElement":null,"consentOnScroll":false,"cookiePolicyId":521121, "banner":{ "acceptButtonDisplay":true,"customizeButtonDisplay":true,"position":"float-top-center","acceptButtonColor":"#0073CE","acceptButtonCaptionColor":"white","customizeButtonColor":"#DADADA","customizeButtonCaptionColor":"#4D4D4D","textColor":"black","backgroundColor":"white" }};
    </script><script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script><meta property="og:title" content="Fix Hibernation after swap partition resize" />
<meta property="og:description" content="Hibernation can be an important feature for many users: it allows people to turn on the PC and get it in the exact state session of when it was turned off (open files, running applications, configurations edited, terminals, etc.).
This feature is based on usage of swap partition. In poor words: when user hibernate PC, all content of RAM memory is stored in this partition and is fetched at next startup time." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://valeriogalano.it/tutorials/fix-hibernation-after-swap-partition-resize/" />
<meta property="og:image" content="https://valeriogalano.it/img/profile.jpg"/>
<meta property="article:published_time" content="2013-08-05T15:16:30+00:00" />
<meta property="article:modified_time" content="2013-08-05T15:16:30+00:00" /><meta property="og:site_name" content="Valerio Galano" />
<meta itemprop="name" content="Fix Hibernation after swap partition resize">
<meta itemprop="description" content="Hibernation can be an important feature for many users: it allows people to turn on the PC and get it in the exact state session of when it was turned off (open files, running applications, configurations edited, terminals, etc.).
This feature is based on usage of swap partition. In poor words: when user hibernate PC, all content of RAM memory is stored in this partition and is fetched at next startup time.">
<meta itemprop="datePublished" content="2013-08-05T15:16:30&#43;00:00" />
<meta itemprop="dateModified" content="2013-08-05T15:16:30&#43;00:00" />
<meta itemprop="wordCount" content="314">
<meta itemprop="image" content="https://valeriogalano.it/img/profile.jpg"/>



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://valeriogalano.it/img/profile.jpg"/>

<meta name="twitter:title" content="Fix Hibernation after swap partition resize"/>
<meta name="twitter:description" content="Hibernation can be an important feature for many users: it allows people to turn on the PC and get it in the exact state session of when it was turned off (open files, running applications, configurations edited, terminals, etc.).
This feature is based on usage of swap partition. In poor words: when user hibernate PC, all content of RAM memory is stored in this partition and is fetched at next startup time."/>


    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://valeriogalano.it/>valerio@daredevel ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://valeriogalano.it/">/home/valerio</a>
				</li>
				
				
				<li class="dropdown">
                    
            		<a href="/post">~/blog</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://pensieriincodice.it/">~/podcast</a>
            		
        		</li>
        		

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="container wrapper">
            <h1><a href="https://valeriogalano.it/tutorials/fix-hibernation-after-swap-partition-resize/">Fix Hibernation after swap partition resize</a></h1>
            <span class="post-date">Aug 5, 2013 </span>
            <div class="post-content">
                <p>Hibernation can be an important feature for many users: it allows people to turn on the PC and get it in the exact state session of when it was turned off (open files, running applications, configurations edited, terminals, etc.).</p>
<p>This feature is based on usage of swap partition. In poor words: when user hibernate PC, all content of RAM memory is stored in this partition and is fetched at next startup time. For this reason, the swap partition must be bigger (or at least equal) than RAM size and, in case of RAM update, must be enlarged.</p>
<h2 id="the-problem">The problem</h2>
<p>The problem is that, after a resize operation, swap partition's UUID is modified and initramfs is unable to recognize swap partition. This means that when you try to hibernate your PC, it don't wake up correctly and boots as you turned it off normally.</p>
<h2 id="the-solution">The solution</h2>
<p>The solution is very simple: after swap partition resize operation, let's inform initramfs about new UUID. Let's see how.</p>
<p><!-- raw HTML omitted -->Please, note that following procedure has been tested on Ubuntu 12.04 LTS.<!-- raw HTML omitted --></p>
<p>First of all, we need to discover new UUID of swap partition. So, let's open a terminal window and run following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo blkid</code></pre></div>
<p>It will return the list of partitions on your PC. The output will be something like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">/dev/sda1: <span class="nv">LABEL</span><span class="o">=</span><span class="s2">&#34;Recovery Partition&#34;</span> <span class="nv">UUID</span><span class="o">=</span><span class="s2">&#34;9ECCDDF0CCDDC327&#34;</span> <span class="nv">TYPE</span><span class="o">=</span><span class="s2">&#34;ntfs&#34;</span> 
/dev/sda2: <span class="nv">LABEL</span><span class="o">=</span><span class="s2">&#34;VAIO&#34;</span> <span class="nv">UUID</span><span class="o">=</span><span class="s2">&#34;4C54A5A254A58EF0&#34;</span> <span class="nv">TYPE</span><span class="o">=</span><span class="s2">&#34;ntfs&#34;</span> 
/dev/sda5: <span class="nv">UUID</span><span class="o">=</span><span class="s2">&#34;53199a5e-1427-4e55-8b57-b82d919f2a1c&#34;</span> <span class="nv">TYPE</span><span class="o">=</span><span class="s2">&#34;swap&#34;</span> 
/dev/sda6: <span class="nv">UUID</span><span class="o">=</span><span class="s2">&#34;4f4af466-e3f6-483d-8b60-b7219820a33d&#34;</span> <span class="nv">TYPE</span><span class="o">=</span><span class="s2">&#34;ext3&#34;</span></code></pre></div>
<p>From this list, we need to copy UUID value from line with TYPE=&quot;swap&rdquo;. Now, use it to replace content of file /etc/initramfs-tools/conf.d/resume running following command (of course, you have to replace my example UUID with one you discovered in previous step):</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo <span class="nb">echo</span> <span class="s2">&#34;RESUME=UUID=53199a5e-1427-4e55-8b57-b82d919f2a1c&#34;</span> &gt; /etc/initramfs-tools/conf.d/resume</code></pre></div>
<p>Finally let's rebuild our initramfs with following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo update-initramfs -u</code></pre></div>
<p>Now, let's reboot the system and, if everything goes well, hibernation should work again.</p>
<p>Nota: <!-- raw HTML omitted -->Questo articolo è disponibile anche in lingua italiana<!-- raw HTML omitted -->.</p>

            </div>
            
            <div class="post-comments">
                
<div id="disqus_thread"></div>
<script type="text/plain" class="_iub_cs_activate" data-iub-purposes="3">

(function() {
    // Don't ever inject Disqus on localhost--it creates unwanted
    // discussions from 'localhost:1313' on your Disqus account...
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'daredevel';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            </div>
            
            <div class="push"></div>
        </div>
        <footer class="footer text-center">
<p>Copyright &copy; 2019 Valerio Galano -
	<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme
</span> -
<a href="https://www.iubenda.com/privacy-policy/521121" class="iubenda-nostyle no-brand iubenda-embed" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
</p>


<link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


<link rel="stylesheet" href="https://valeriogalano.it/css/nix.css">

</footer>

    </body>
